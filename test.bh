# 測試全域變數、區域變數、指派與作用域

x = 10
y = 99

% "全域 x 初值:"
% x

f change_x(a) {
	x = a       # 這會蓋掉全域 x？
    % "函式內 x:"
    % x
}

change_x(100)
% "呼叫完 change_x 之後全域 x:"
% x

f local_test() {
    z = 77
    % "local_test 內 z:"
    % z
}
local_test()
# % z   # 這裡應該會出錯：z 在全域不可見

# if-else 判斷與巢狀
? (x > 50) {
    % "x > 50"
} ~ {
    % "x <= 50"
}

# while 迴圈
j = 0
@ (j < 5) {
    j = j + 1
    ? (j == 3) {
        >>      # continue
    }
    ? (j == 4) {
        <<      # break
    }
    % j
}

# for 迴圈
$ (i = 0; i < 5; i = i + 1) {
    ? (i == 2) {
        <<      # continue
    }
    ? (i == 4) {
        >>      # break
    }
    % i
}

# switch-case 判斷
t = 2
^ (t) {
    | 1: {
        % "one"
    }
    | 2: {
        % "two"
    }
    _: {
        % "not one or two"
    }
}

# 布林邏輯
b1 = T
b2 = F
? (b1 && !b2) {
    % "邏輯運算通過"
} ~ {
    % "邏輯運算失敗"
}

# 字串操作 & 函式回傳
f concat_hello(name) {
    r "Hello, " + name
}
% concat_hello("world")

# 作用域測試：區域變數不影響全域
m = 5
f scope_demo() {
    m = 100
    % "函式內 m: " + m
}
scope_demo()
% "全域 m: " + m

# 測試 return 中斷
f early_return() {
    % "這應該會印"
    r 123
    % "這不會被印"
}
% early_return()
